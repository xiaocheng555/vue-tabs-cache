"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[123],{123:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"layout-container-demo",staticStyle:{height:"100vh"}},[e("el-aside",{attrs:{width:"200px"}},[e("el-scrollbar",[e("el-menu",{attrs:{router:""}},t._l(t.menus,(function(a,s){return e("el-menu-item",{key:s,attrs:{index:String(s),route:{path:a.link}}},[t._v(" "+t._s(a.title)+" ")])})),1)],1)],1),e("el-container",[e("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[e("layout-tabs")],1),e("p",{staticStyle:{color:"#999",padding:"0 20px 5px"}},[t._v("缓存组件："+t._s(t.caches))]),e("el-main",{attrs:{id:"app-main-scroller"}},[e("div",{staticStyle:{padding:"20px"}},[e("keep-alive",{attrs:{include:t.caches}},[t.isRenderTab?e("router-view"):t._e()],1)],1)])],1)],1)},i=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-tabs"},[e("el-tabs",{attrs:{type:"border-card",closable:""},on:{"tab-click":t.clickTab,"tab-remove":t.removeTab},model:{value:t.curTabKey,callback:function(e){t.curTabKey=e},expression:"curTabKey"}},t._l(t.tabs,(function(a){return e("el-tab-pane",{key:a.tabKey,attrs:{label:a.title,name:a.tabKey}},[e("template",{slot:"label"},[t._v(t._s(a.title)+" "),t.curTabKey===a.tabKey?e("i",{staticClass:"el-icon-refresh",on:{click:function(e){return t.refreshTab(a)}}}):t._e()])],2)})),1),e("div",{staticClass:"close-tabs",on:{click:t.closeOtherTabs}},[t._v("关闭其他")])],1)},r=[],c=a(3822),l=a(6729),o={name:"LayoutTabs",props:{tabRouteViewDepth:{type:Number,default:2},getTabKey:{type:Function,default:function(t){return t.path}},tabTitleKey:{type:String,default:"title"}},data(){return{tabs:[],curTabKey:""}},methods:{...(0,c.nv)("cache",["addCache","removeCache","removeCacheEntry"]),...(0,c.OI)(["setIsRenderTab"]),changeCurTab(){const{path:t,query:e,params:a,hash:s,matched:i}=this.$route,n=i[this.tabRouteViewDepth-1],r=n.meta,c=n.components?.default?.name,l=this.getTabKey(n,this.$route),o=String(r[this.tabTitleKey]||""),h=this.tabs.find((t=>t.tabKey===l));if(!l)return void console.warn(`LayoutTabs组件：${t} 路由没有匹配的tab标签页，如有需要请配置tab标签页的key值`);h&&h.path!==t&&this.tabRouteViewDepth===i.length&&(this.removeCacheEntry(c||""),h.title="");const b={tabKey:l,title:h?.title||o,path:t,params:a,query:e,hash:s,componentName:c};h?Object.assign(h,b):this.tabs.push(b),this.curTabKey=l},clickTab(t){if(!t.index)return;const e=this.tabs[Number(t.index)];e.path!==this.$route.path&&this.gotoTab(e)},async removeTab(t){if(1===this.tabs.length)return;const e=this.tabs.findIndex((e=>e.tabKey===t));if(e<-1)return;const a=this.tabs[e];if(this.tabs.splice(e,1),a.tabKey===this.curTabKey){const t=this.tabs[this.tabs.length-1];t&&this.gotoTab(t)}this.removeCache(a.componentName||"")},async gotoTab(t){await this.$router.push({path:t.path,query:t.query,hash:t.hash})},closeOtherTabs(){this.tabs.filter((t=>t.tabKey!==this.curTabKey)).forEach((t=>{this.removeCache(t.componentName||"")})),this.tabs=this.tabs.filter((t=>t.tabKey===this.curTabKey))},async refreshTab(t){this.setIsRenderTab(!1),await this.removeCacheEntry(t.componentName),this.setIsRenderTab(!0)},async closeLayoutTab(t=this.curTabKey){const e=this.tabs.findIndex((e=>e.tabKey===t));e>-1&&(this.removeCache(this.tabs[e].componentName),this.tabs.splice(e,1))},setCurTabTitle(t){const e=this.tabs.find((t=>t.tabKey===this.curTabKey));e&&(e.title=t)}},watch:{"$route.path":{handler(){this.changeCurTab()},immediate:!0}},created(){l.Z.$on("LayoutTabs:closeTab",(t=>{this.closeLayoutTab(t)})),l.Z.$on("LayoutTabs:setTabTitle",(t=>{this.setCurTabTitle(t)}))}},h=o,b=a(1001),u=(0,b.Z)(h,n,r,!1,null,"3f71b9ea",null),y=u.exports,p={components:{LayoutTabs:y},data(){return{menus:[{link:"/",title:"首页"},{link:"/article",title:"文章列表"},{link:"/child",title:"多级缓存"},{link:"/KeepScroll",title:"记录滚动位置"}]}},computed:{...(0,c.rn)("cache",["caches"]),...(0,c.rn)(["isRenderTab"])}},d=p,T=(0,b.Z)(d,s,i,!1,null,"3021c78b",null),m=T.exports},6729:function(t,e,a){var s=a(6369);const i=new s["default"];e["Z"]=i}}]);
//# sourceMappingURL=123.635cc5ed.js.map